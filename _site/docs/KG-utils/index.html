<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2709176-10', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>KG Utils | Tackle Container Advisor</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="KG Utils" /><meta property="og:locale" content="en_US" /><meta name="description" content="A Jekyll theme for TCA documentation" /><meta property="og:description" content="A Jekyll theme for TCA documentation" /><link rel="canonical" href="http://localhost:4000/docs/KG-utils/" /><meta property="og:url" content="http://localhost:4000/docs/KG-utils/" /><meta property="og:site_name" content="Tackle Container Advisor" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="KG Utils" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A Jekyll theme for TCA documentation","headline":"KG Utils","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/konveyor.png"}},"url":"http://localhost:4000/docs/KG-utils/"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <a href="https://www.konveyor.io/tools/tackle"> <img alt="Konveyor Tackle" src="/assets/images/tackle-img.png" width="250" height="150"/> </a><p style="color:white; margin-right: 15px">Assess, Prioritize, and Refactor Applications to Kubernetes</p><a href="https://github.com/konveyor/tackle-container-advisor" class="navigation-list-link" >View the project on GitHub</a><p style="font-size: 10px; color:white; margin-top:0">konveyor/tackle-container-advisor<p> <a class="github-button" href="https://github.com/konveyor/tackle-container-advisor" data-icon="octicon-star" data-show-count="true" aria-label="Star konveyor/tackle-container-advisor on GitHub"><img alt="Star-Fork" src="/assets/images/star-fork.png" width="250" height="150"/></a><hr style="margin-bottom:20px; margin-top:10px"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="http://localhost:4000/docs/configuration/" class="nav-list-link">Configuration</a><li class="nav-list-item"><a href="http://localhost:4000/docs/setup/" class="nav-list-link">Setup and Running TCA</a><li class="nav-list-item"><a href="http://localhost:4000/docs/knowledge-base/" class="nav-list-link">Knowledge Base</a><li class="nav-list-item active"><a href="http://localhost:4000/docs/KG-utils/" class="nav-list-link active">KG Utils</a><li class="nav-list-item"><a href="http://localhost:4000/docs/entity-standardizer/" class="nav-list-link">Entity Standardizer</a><li class="nav-list-item"><a href="http://localhost:4000/docs/references/" class="nav-list-link">Presentations</a><li class="nav-list-item"><a href="http://localhost:4000/docs/publications/" class="nav-list-link">References</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Tackle Container Advisor" aria-label="Search Tackle Container Advisor" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/konveyor/tackle-container-advisor" class="site-button" > TCA </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><h2 id="tcas-knowledge-base-utilities"> <a href="#tcas-knowledge-base-utilities" class="anchor-heading" aria-labelledby="tcas-knowledge-base-utilities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> TCA’s Knowledge Base Utilities</h2><p>Python scripts to generate JSON from Database</p><h3 id="install-anaconda3"> <a href="#install-anaconda3" class="anchor-heading" aria-labelledby="install-anaconda3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install Anaconda3</h3><ul><li>Follow instructions to download and install Anaconda3</ul><h3 id="create-conda-virtual-environment"> <a href="#create-conda-virtual-environment" class="anchor-heading" aria-labelledby="create-conda-virtual-environment"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create conda virtual environment</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Requires python 3.8
conda create --name &lt;env-name&gt; python=3.8
conda activate &lt;env-name&gt; ### Clone TCA
git clone git@github.com:konveyor/tackle-container-advisor.git
</code></pre></div></div><h3 id="how-to-use"> <a href="#how-to-use" class="anchor-heading" aria-labelledby="how-to-use"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to use</h3><ul><li><code class="language-plaintext highlighter-rouge">cd tackle-container-advisor</code><li><code class="language-plaintext highlighter-rouge">pip3 install -r requirements.txt</code><li><code class="language-plaintext highlighter-rouge">cd kg_utils</code><li><code class="language-plaintext highlighter-rouge">db</code> provides the input data<li>From top level folder run <code class="language-plaintext highlighter-rouge">python kg_utils/kg_utils.py</code> and <code class="language-plaintext highlighter-rouge">python kg_utils/generator.py</code><li>Outputs json are saved in: <code class="language-plaintext highlighter-rouge">kg/</code></ul><h3 id="generate-documentation"> <a href="#generate-documentation" class="anchor-heading" aria-labelledby="generate-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generate documentation:</h3><ul><li>mkdir <code class="language-plaintext highlighter-rouge">docs</code> &amp;&amp; cd <code class="language-plaintext highlighter-rouge">docs</code><li>Run <code class="language-plaintext highlighter-rouge">sphinx-quickstart</code><li>Follow and accept default prompts. make sure you enter the project’s name<li>Setting up conf.py:<ul><li>Uncomment <code class="language-plaintext highlighter-rouge">import os</code> and <code class="language-plaintext highlighter-rouge">import sys</code><li><p>Uncomment and Change path: <code class="language-plaintext highlighter-rouge">sys.path.insert(0, os.path.abspath('..'))</code></p><li><p>In the <code class="language-plaintext highlighter-rouge"># -- General configuration ---</code> field, add <code class="language-plaintext highlighter-rouge">extensions = ['sphinx.ext.autodoc']</code></p><li>In the <code class="language-plaintext highlighter-rouge"># -- Options for HTML output ---</code> field, add <code class="language-plaintext highlighter-rouge">html_theme = 'sphinx_rtd_theme'</code></ul><li>Setting up index.rst: Add <code class="language-plaintext highlighter-rouge">modules</code> after line 11<li>Run <code class="language-plaintext highlighter-rouge">sphinx-apidoc -o . ..</code><li>Run <code class="language-plaintext highlighter-rouge">make html</code><li>Documentation is located in <code class="language-plaintext highlighter-rouge">/docs/_build/html/index.html</code></ul><h2 id="tca_image_search"> <a href="#tca_image_search" class="anchor-heading" aria-labelledby="tca_image_search"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> TCA_image_search</h2><p>Allows users to search relevant or exact container images from DockerHub ,Quai.io , and Artifacthub.io(Community Operators OLM) registries.</p><h2 id="search-urls"> <a href="#search-urls" class="anchor-heading" aria-labelledby="search-urls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Search urls:</h2><ul><li><p>Dockerhub Dockerhub repository: <a href="https://hub.docker.com/">Dockerhub images</a>.</p><li><p>RedHat OpenShift: <a href="https://quay.io/search">RedHat Quay</a>,</p><li><p>Redhat OperatorHub: <a href="https://artifacthub.io/">Artifact.io</a></p></ul><h2 id="getting-started"> <a href="#getting-started" class="anchor-heading" aria-labelledby="getting-started"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting started</h2><h4 id="prerequisite"> <a href="#prerequisite" class="anchor-heading" aria-labelledby="prerequisite"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisite</h4><ul><li>Use <a href="https://github.ibm.com/tca-team/TCA_KG_Augmentation">TCA_KG_Aumentation</a> repos to augmment new entities to the database by following the instructions from the README file. You can add a single entity or a batch of entities from a csv file to the entities table.<li><p>Make sure you have <a href="https://docs.docker.com/engine/install/">docker</a> installed locally.</p><li><p>The path “db{db_version}.db”, where “db_version” is the latest TCA database version and contains all entities to search(see “entity_name” table) for images.</p><li>In VSCODE, Open the folder in a container, which will install all dependencies needed to run the script.</ul><h4 id="input-data-to-the-search-engine"> <a href="#input-data-to-the-search-engine" class="anchor-heading" aria-labelledby="input-data-to-the-search-engine"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Input data to the search engine.</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Data are loaded from the entities table from the database. You may search a single entity or all entities from the database. 
</code></pre></div></div><p>Sample entities table</p><p><img src="https://github.com/divsan93/tackle-container-advisor/blob/kb_expansion/images/entities.png" alt="This is an image" /></p><h4 id="running-the-script"> <a href="#running-the-script" class="anchor-heading" aria-labelledby="running-the-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the script</h4><p><code class="language-plaintext highlighter-rouge">python kg_utils/search_images.py -e &lt;entity_name(s)&gt; -db db\{db_version}.db</code> This loads entity(ies) from the entity_name table and searches images across all catalogues.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python kg_utils/search_images.py -h

usage: Search container images  from dockerhub , Quay.io , and Artifacthub.io

optional arguments:

  -h, --help            show this help message and exit
  
  -e ENTITY, --entity ENTITY  Enter entity name(s) from the database. i.e :-e nginx,tomcat,ubuntu or -e all ( to search all entities). Also enclose entities with                        
  
             double words in  a quote. For example: -e 'ibm i',db2,'Apache Kafka'
             
  -db DATABASE_PATH, --database_path  DATABASE_PATH    Path containing the latest tackle containerization advisor database.
  
Try $python    -e &lt;entity_names&gt;    -db &lt;database_path"&gt; or type $python  src/search_images.py --help

</code></pre></div></div><p>Results are saved into the following files: <code class="language-plaintext highlighter-rouge">kg_utils\image_search_kg\images.json</code> , <code class="language-plaintext highlighter-rouge">kg_utils\image_search_kg\operator_images.csv</code> ,<code class="language-plaintext highlighter-rouge">kg_utils\image_search_kg\openshift_images.csv</code> ,and <code class="language-plaintext highlighter-rouge">kg_utils\image_search_kg\docker_images.csv</code></p><h3 id="kg-augmentation"> <a href="#kg-augmentation" class="anchor-heading" aria-labelledby="kg-augmentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> KG Augmentation</h3><h5 id="tca-kg-augmentation-script-allows-a-semi-automatic-way-of-ingesting-data-into-the-tca-knowledge-base"> <a href="#tca-kg-augmentation-script-allows-a-semi-automatic-way-of-ingesting-data-into-the-tca-knowledge-base" class="anchor-heading" aria-labelledby="tca-kg-augmentation-script-allows-a-semi-automatic-way-of-ingesting-data-into-the-tca-knowledge-base"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> TCA KG Augmentation script allows a semi-automatic way of ingesting data into the TCA Knowledge Base</h5><h5 id="the-command-line-script-kg_augpy-can-be-executed-in-2-modes"> <a href="#the-command-line-script-kg_augpy-can-be-executed-in-2-modes" class="anchor-heading" aria-labelledby="the-command-line-script-kg_augpy-can-be-executed-in-2-modes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The command line script (kg_aug.py) can be executed in 2 modes:</h5><ol><li><p>Interactive - This mode can be used for processing single entry. It allows the user to choose a table by listing all the tables in the TCA database. Based on the chosen table, the user can interactively enter values for the vaious fields. All the fields are listed along with the field type (e.g.- integer, text etc.) For fields that accept only certain values, the acceptable values are also displayed along with the field name. Some automatic checks are perfomed as the user enters a value for a particular field and if the value does not match the specified type or acceptable list of values mentioned, there is a prompt to re-enter the value for that particular field.</p><li><p>Batch - Batch mode is used for processing multiple entries. The input is a csv file with multiple values that need to be entered into the database. The format to enter values in the csv is as follows: Table_name, value1, value2,…, value n</p></ol><p>The id field for all the tables is auto generated so the user does not have to specify it. As every entry is processed there is a automatic check for dulpicate entries. If a duplicate entry is found it is skipped and not inserted into the database. For every new entity thats inserted into KG, the mentions are automatically generated from wikidata.</p><h5 id="a-sample-csv-file-inputcsv-has-been-uploaded-for-reference---inputcsv"> <a href="#a-sample-csv-file-inputcsv-has-been-uploaded-for-reference---inputcsv" class="anchor-heading" aria-labelledby="a-sample-csv-file-inputcsv-has-been-uploaded-for-reference---inputcsv"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A sample csv file (input.csv) has been uploaded for reference - input.csv</h5><h3 id="running-the-script-1"> <a href="#running-the-script-1" class="anchor-heading" aria-labelledby="running-the-script-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the script</h3><h5 id="to-run-the-script-you-can-use-one-of-the-following-commands-based"> <a href="#to-run-the-script-you-can-use-one-of-the-following-commands-based" class="anchor-heading" aria-labelledby="to-run-the-script-you-can-use-one-of-the-following-commands-based"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> To run the script you can use one of the following commands based:</h5><ol><li>Interactive mode: python kg_aug.py -m interactive -d 1.0.4.db<li>Batch mode: python kg_aug.py -m batch -b input.csv -d 1.0.4.db</ol><h5 id="the--m-indicated-the-mode-interactive-or-batch--b-points-to-the-csv-file-for-batch-processing-and--d-specifies-the-database-file"> <a href="#the--m-indicated-the-mode-interactive-or-batch--b-points-to-the-csv-file-for-batch-processing-and--d-specifies-the-database-file" class="anchor-heading" aria-labelledby="the--m-indicated-the-mode-interactive-or-batch--b-points-to-the-csv-file-for-batch-processing-and--d-specifies-the-database-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The -m indicated the mode (interactive or batch), -b points to the csv file for batch processing and -d specifies the database file.</h5><h4 id="usage"> <a href="#usage" class="anchor-heading" aria-labelledby="usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: kg_aug.py [-h] -m MODE -d DB_FILE [-b BATCH_FILE] [-r DEL_FILE]

modify KB by adding or deleting entities

optional arguments:
  -h, --help     show this help message and exit
  -m MODE        mode: interactive or batch
  -d DB_FILE     database file (.db) path
  -b BATCH_FILE  batch file (.txt) path
  -r DEL_FILE    entities to delete/replace list file (.csv) path
</code></pre></div></div><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 Patrick Marsceill. Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"></div></footer></div></div><div class="search-overlay"></div></div>
